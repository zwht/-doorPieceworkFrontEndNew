<div class="door_edit_cpt">
  <page-header [breadcrumb]="breadcrumb">
    <ng-template #breadcrumb>
      <nz-breadcrumb>
        <nz-breadcrumb-item><a href="/#/admin/baseCorporation/door">{{cpName}}列表</a></nz-breadcrumb-item>
        <nz-breadcrumb-item>{{title+cpName}}</nz-breadcrumb-item>
      </nz-breadcrumb>
    </ng-template>
  </page-header>
  <nz-card>
    <nz-spin *ngIf="!i" class="modal-spin"></nz-spin>
    <div *ngIf="i" nz-row>
      <div nz-col nzSpan="24">
        <app-cropper-img [(ngModel)]="cropperImg" [showBtn]=false [boxStyle]="{width:400,height:400, previewWidth:300,previewHeight:300}"></app-cropper-img>
        <sf #sf mode="edit" [schema]="schema" [ui]="ui" [formData]="i" button="none">
          <footer-toolbar errorCollect>
            <button nz-button type="button" (click)="back()" [nzLoading]="http.loading">返回</button>
            <button nz-button type="submit" nzType="primary" (click)="save(sf.value)" [disabled]="!sf.valid"
              [nzLoading]="http.loading">保存</button>
          </footer-toolbar>
        </sf>
        <div class="arithmetic">
          <p>门洞变量：高=h，宽=w，厚=d</p>
          <ul>
            <li><b>门扇长</b><input nz-input placeholder="msH=h-50" [(ngModel)]="msH" /></li>
            <li><b>门扇宽</b><input nz-input placeholder="msW=w-50" [(ngModel)]="msH" /></li>
            <li><b>立板长</b><input nz-input placeholder="lbH=h-50" [(ngModel)]="msH" /></li>
            <li><b>立板宽</b><input nz-input placeholder="lbW=d-50" [(ngModel)]="msH" /></li>
            <li><b>顶板长</b><input nz-input placeholder="dbH=w-50" [(ngModel)]="msH" /></li>
            <li><b>顶板宽</b><input nz-input placeholder="dbW=d-50" [(ngModel)]="msH" /></li>
          </ul>
        </div>
      </div>
      <div nz-col nzSpan="24">
        <div nz-row class="gxBox">
          <div *ngFor="let item of myGxList" nz-col nzSpan="2">
            <div class="i1" (contextmenu)="onContextMenu($event, item)">
              {{item.name}}
            </div>
            <div class="i2">
              <input *ngIf="item.name" [(ngModel)]="item.price"
              type='number' nz-input placeholder="请输入工序单价">
            </div>
            <div class="i3"></div>
          </div>
        </div>
      </div>
      <context-menu>
          <ng-template *ngIf="modleGxL.length" (execute)="contextMenuClick($event,'add1')" contextMenuItem>
            在前添加
          </ng-template>
          <ng-template *ngIf="modleGxL.length" (execute)="contextMenuClick($event,'add2')" contextMenuItem>
            在后添加
          </ng-template>
          <ng-template divider="true"></ng-template>
          <ng-template (execute)="contextMenuClick($event,'del')" contextMenuItem>
            删除
          </ng-template>
        </context-menu>
    </div>
  </nz-card>
</div>